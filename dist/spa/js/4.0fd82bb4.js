(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"8b24":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"container"},[a("div",{staticClass:"row q-col-gutter-lg"},[a("div",{staticClass:"col-12 col-sm-8"},[this.loading?[a("Skeleton")]:t._l(t.getVibes,(function(t,e){return a("VibeCard",{key:t.id,attrs:{vibe:t,id:e}})}))],2),a("div",{staticClass:"col-4"},[a("q-item",{staticClass:"fixed q-py-lg"},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{size:"60px"}},[a("img",{attrs:{src:t.getUser.image.url}})])],1),this.$q.dark.isActive?t._e():a("q-item-section",[a("q-item-label",{staticClass:"text-dark"},[t._v("\n            "+t._s(t.getUser.username)+"\n            "),a("q-btn",{staticStyle:{color:"#0a0078"},attrs:{flat:"",rounded:"",label:"Sign Out"},on:{click:function(e){return t.nullifyToken()}}})],1)],1),this.$q.dark.isActive?a("q-item-section",[a("q-item-label",{staticClass:"text-white"},[t._v("\n          "+t._s(t.getUser.username)+"\n          "),a("q-btn",{staticStyle:{color:"#7653a3"},attrs:{flat:"",label:"Sign Out"},on:{click:function(e){return t.nullifyToken()}}})],1)],1):t._e()],1)],1)])])},i=[],n=a("ded3"),c=a.n(n),r=a("2f62"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",{staticClass:"my-card q-my-lg",attrs:{flat:"",bordered:""}},[a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",[a("img",{attrs:{src:t.vibe.author.image.url}})])],1),a("q-item-section",[a("q-item-label",{staticClass:"text-bold"},[t._v(t._s(t.vibe.author.username))]),a("q-item-label",{attrs:{caption:""}},[t._v("\n         "+t._s(t.vibe.location)+"\n        ")])],1),t.vibe.author.username===t.getUser.username?a("q-btn",{attrs:{color:"grey-7",round:"",flat:"",icon:"more_vert"}},[a("q-menu",{attrs:{cover:"","auto-close":""}},[a("q-list",[a("q-item",{attrs:{clickable:""}},[a("q-item-section",{on:{click:function(e){return t.deleteVibe()}}},[t._v("Delete")])],1)],1)],1)],1):t._e()],1),a("q-separator"),a("img",{attrs:{src:t.vibe.image.url}}),a("q-card-section",{},[a("div",{staticClass:"q-mb-sm text-weight-regular"},[t._v("\n       "+t._s(t.vibe.caption)+"\n     ")]),a("div",{staticClass:"q-mb-sm text-subtitle2 text-grey-7"},[t._v("\n       "+t._s(t._f("convertDate")(t.vibe.date))+"\n       ")]),this.$q.dark.isActive?t._e():a("q-btn",{staticClass:"text-grey-10 q-mr-md",attrs:{flat:"",round:"",color:"primary",size:"14px",icon:"eva-message-circle-outline",dense:""},on:{click:t.toggleComments}}),this.$q.dark.isActive?a("q-btn",{staticClass:"text-white q-mr-md",attrs:{flat:"",round:"",color:"primary",size:"14px",icon:"eva-message-circle-outline",dense:""},on:{click:t.toggleComments}}):t._e()],1),t.showComments?a("q-card-section",[t._l(t.comments,(function(t){return a("Comment",{key:t._id,attrs:{comment:t}})})),a("q-form",{staticClass:"q-gutter-md",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("q-input",{staticClass:"q-mt-md",attrs:{color:"purple-12",label:"Vibe your toughts",dense:""},model:{value:t.credentials.comment,callback:function(e){t.$set(t.credentials,"comment",e)},expression:"credentials.comment"}})],1)],2):t._e()],1)],1)},l=[],m=a("bd4c"),u=a("bc3a"),d=a.n(u),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md"},[a("div",{staticStyle:{width:"100%","max-width":"400px"}},[a("q-item",{staticClass:"q-mb-sm"},[a("div",{},[a("q-item-section",{},[a("div",{staticClass:"flex row"},[a("div",{staticClass:"q-mr-md"},[a("q-avatar",[a("img",{attrs:{src:t.comment.author.image.url}})])],1),a("div",[a("q-item-label",{staticClass:"text-bold"},[t._v(t._s(t.comment.author.username))]),a("q-item-label",{staticClass:"black"},[t._v(t._s(t.comment.caption))])],1)])])],1)])],1)])},h=[],p={components:{},data(){return{}},props:["comment"]},v=p,g=a("2877"),q=a("66e5"),f=a("4074"),_=a("cb32"),C=a("0170"),k=a("eebe"),x=a.n(k),Q=Object(g["a"])(v,b,h,!1,null,null,null),w=Q.exports;x()(Q,"components",{QItem:q["a"],QItemSection:f["a"],QAvatar:_["a"],QItemLabel:C["a"]});var y={components:{Comment:w},props:["vibe","id"],data(){return{showComments:!1,comments:{},credentials:{vibe:this.vibe,comment:""}}},computed:c()(c()(c()({},Object(r["c"])("vibe",["getVibes"])),Object(r["c"])("user",["getUser"])),Object(r["c"])("comment",["getComments"])),methods:c()(c()({},Object(r["b"])("comment",["fetchComments"])),{},{deleteVibe(t){let e=`https://vibehouse-backend.herokuapp.com/api/posts/${this.vibe._id}/delete`;d.a.delete(e).then((()=>{this.$q.notify({message:"Vibe successfully removed",color:"negative",actions:[{label:"Dismiss",color:"white"}]}),this.getVibes.splice(this.getVibes.indexOf(this.vibe),1)}))},toggleComments(){this.showComments=!this.showComments,d.a.get(`https://vibehouse-backend.herokuapp.com/api/posts/${this.vibe._id}/comments`,{headers:{authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.comments=t.data}))},submit(){d.a.post(`https://vibehouse-backend.herokuapp.com/api/posts/${this.vibe._id}/comments/new`,this.credentials,{headers:{authorization:`Bearer ${localStorage.token}`}}).then((t=>{this.comments.push(t.data),this.credentials.comment=""})).catch((t=>{console.log(t)}))}}),filters:{convertDate(t){return m["a"].formatDate(t,"MMMM D h:mmA")}}},$=y,O=a("f09f"),S=a("9c40"),I=a("4e73"),j=a("1c1c"),V=a("eb85"),A=a("a370"),D=a("0378"),B=a("27f9"),U=Object(g["a"])($,o,l,!1,null,null,null),z=U.exports;x()(U,"components",{QCard:O["a"],QItem:q["a"],QItemSection:f["a"],QAvatar:_["a"],QItemLabel:C["a"],QBtn:S["a"],QMenu:I["a"],QList:j["a"],QSeparator:V["a"],QCardSection:A["a"],QForm:D["a"],QInput:B["a"]});a("df3a");var L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",{staticStyle:{"max-width":"300px"}},[a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-skeleton",{attrs:{type:"QAvatar"}})],1),a("q-item-section",[a("q-item-label",[a("q-skeleton",{attrs:{type:"text"}})],1),a("q-item-label",{attrs:{caption:""}},[a("q-skeleton",{attrs:{type:"text"}})],1)],1)],1),a("q-skeleton",{attrs:{height:"200px",square:""}}),a("q-card-actions",{staticClass:"q-gutter-md",attrs:{align:"right"}},[a("q-skeleton",{attrs:{type:"QBtn"}}),a("q-skeleton",{attrs:{type:"QBtn"}})],1)],1)],1)},E=[],M=a("293e"),F=a("4b7e"),T={},J=Object(g["a"])(T,L,E,!1,null,null,null),P=J.exports;x()(J,"components",{QCard:O["a"],QItem:q["a"],QItemSection:f["a"],QSkeleton:M["a"],QItemLabel:C["a"],QCardActions:F["a"]});var R={name:"PageIndex",data(){return{loading:!1}},mounted(){this.loading=!0,this.fetchVibes(),this.loading=!1},components:{VibeCard:z,Skeleton:P},computed:c()(c()({},Object(r["c"])("vibe",["getVibes"])),Object(r["c"])("user",["getUser"])),methods:c()(c()(c()({},Object(r["b"])("vibe",["fetchVibes"])),Object(r["b"])("user",["signOut"])),{},{nullifyToken(){this.signOut().then((()=>{this.$router.push("/login")}))}})},G=R,H=a("9989"),K=Object(g["a"])(G,s,i,!1,null,null,null);e["default"]=K.exports;x()(K,"components",{QPage:H["a"],QItem:q["a"],QItemSection:f["a"],QAvatar:_["a"],QItemLabel:C["a"],QBtn:S["a"]})},"92ec":function(t,e,a){},c857:function(t,e,a){"use strict";a("92ec")},df3a:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("input",{ref:"file",staticClass:"hidden",attrs:{type:"file",accept:"image/*"},on:{change:t.change}}),a("div",{staticClass:"img-container"},[a("q-img",{staticStyle:{height:"140px","max-width":"150px"},attrs:{src:t.src,"placeholder-src":"https://cdn0.iconfinder.com/data/icons/communication-line-10/24/account_profile_user_contact_person_avatar_placeholder-512.png","spinner-color":"white"}}),a("div",{staticClass:"btn-container"},[a("q-btn",{staticClass:"text-white q-mr-md",attrs:{flat:"",round:"",color:"white",size:"18px",icon:"eva-image-outline",dense:""},on:{click:function(e){return t.browse()}}})],1)],1)])},i=[],n={props:{value:File},data(){return{src:null,file:null}},methods:{browse(){this.$refs.file.click()},change(t){this.file=t.target.files[0],this.$emit("input",this.file);let e=new FileReader;e.readAsDataURL(this.file),e.onload=t=>{this.src=t.target.result}}}},c=n,r=(a("c857"),a("2877")),o=a("068f"),l=a("9c40"),m=a("eebe"),u=a.n(m),d=Object(r["a"])(c,s,i,!1,null,null,null);e["a"]=d.exports;u()(d,"components",{QImg:o["a"],QBtn:l["a"]})}}]);